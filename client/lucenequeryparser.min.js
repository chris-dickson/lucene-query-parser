!function(l){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=l();else if("function"==typeof define&&define.amd)define([],l);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.lucenequeryparser=l()}}(function(){return function l(n,u,r){function e(i,o){if(!u[i]){if(!n[i]){var f="function"==typeof require&&require;if(!o&&f)return f(i,!0);if(t)return t(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var a=u[i]={exports:{}};n[i][0].call(a.exports,function(l){var u=n[i][1][l];return e(u?u:l)},a,a.exports,l,n,u,r)}return u[i].exports}for(var t="function"==typeof require&&require,i=0;i<r.length;i++)e(r[i]);return e}({1:[function(l,n,u){n.exports=function(){function l(l){return'"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,u){function r(l){D>q||(q>D&&(D=q,S=[]),S.push(l))}function e(){var l,n,u,r,e;for(r=q,e=q,l=[],n=w();null!==n;)l.push(n),n=w();if(null!==l){if(u=t(),null!==u)for(n=[];null!==u;)n.push(u),u=t();else n=null;null!==n?l=[l,n]:(l=null,q=e)}else l=null,q=e;if(null!==l&&(l=function(l,n){return n[0]}(r,l[1])),null===l&&(q=r),null===l){for(r=q,l=[],n=w();null!==n;)l.push(n),n=w();null!==l&&(l=function(l){return{}}(r)),null===l&&(q=r),null===l&&(r=q,l=E(),null!==l&&(l=function(l){return{}}(r)),null===l&&(q=r))}return l}function t(){var l,n,u,r,e,o;if(e=q,o=q,l=y(),null!==l?(n=E(),null!==n?l=[l,n]:(l=null,q=o)):(l=null,q=o),null!==l&&(l=function(l,n){return{operator:n}}(e,l[0])),null===l&&(q=e),null===l&&(e=q,o=q,l=y(),null!==l?(n=t(),null!==n?l=[l,n]:(l=null,q=o)):(l=null,q=o),null!==l&&(l=function(l,n,u){return u}(e,l[0],l[1])),null===l&&(q=e),null===l)){if(e=q,o=q,l=i(),null!==l){for(n=[],u=y();null!==u;)n.push(u),u=y();if(null!==n){for(u=[],r=t();null!==r;)u.push(r),r=t();null!==u?l=[l,n,u]:(l=null,q=o)}else l=null,q=o}else l=null,q=o;null!==l&&(l=function(l,n,u,r){var e={left:n},r=0==r.length?null:null==r[0].right?r[0].left:r[0];return null!=r&&(e.operator=""==u?"<implicit>":u[0],e.right=r),e}(e,l[0],l[1],l[2])),null===l&&(q=e)}return l}function i(){var l,n,u,r,e;if(r=q,e=q,l=f(),null!==l){for(n=[],u=w();null!==u;)n.push(u),u=w();null!==n?l=[l,n]:(l=null,q=e)}else l=null,q=e;return null!==l&&(l=function(l,n){return n}(r,l[0])),null===l&&(q=r),null===l&&(l=o()),l}function o(){var l,u,e,i,o,f,c;if(f=q,c=q,40===n.charCodeAt(q)?(l="(",q++):(l=null,0===j&&r('"("')),null!==l){if(e=t(),null!==e)for(u=[];null!==e;)u.push(e),e=t();else u=null;if(null!==u)if(41===n.charCodeAt(q)?(e=")",q++):(e=null,0===j&&r('")"')),null!==e){for(i=[],o=w();null!==o;)i.push(o),o=w();null!==i?l=[l,u,e,i]:(l=null,q=c)}else l=null,q=c;else l=null,q=c}else l=null,q=c;return null!==l&&(l=function(l,n){return n[0]}(f,l[1])),null===l&&(q=f),l}function f(){var l,n,u,r;return u=q,r=q,l=c(),l=null!==l?l:"",null!==l?(n=g(),null!==n?l=[l,n]:(l=null,q=r)):(l=null,q=r),null!==l&&(l=function(l,n,u){return u.field=""==n?"<implicit>":n,u}(u,l[0],l[1])),null===l&&(q=u),null===l&&(u=q,r=q,l=c(),null!==l?(n=o(),null!==n?l=[l,n]:(l=null,q=r)):(l=null,q=r),null!==l&&(l=function(l,n,u){return u.field=n,u}(u,l[0],l[1])),null===l&&(q=u),null===l&&(u=q,r=q,l=c(),l=null!==l?l:"",null!==l?(n=a(),null!==n?l=[l,n]:(l=null,q=r)):(l=null,q=r),null!==l&&(l=function(l,n,u){var r={field:""==n?"<implicit>":n};for(var e in u)r[e]=u[e];return r}(u,l[0],l[1])),null===l&&(q=u))),l}function c(){var l,u,e,t;return e=q,t=q,l=s(),null!==l?(/^[:]/.test(n.charAt(q))?(u=n.charAt(q),q++):(u=null,0===j&&r("[:]")),null!==u?l=[l,u]:(l=null,q=t)):(l=null,q=t),null!==l&&(l=function(l,n){return n}(e,l[0])),null===l&&(q=e),l}function a(){var l,n,u,r,e,t,i,o;if(i=q,o=q,l=O(),l=null!==l?l:"",null!==l)if(n=p(),null!==n)if(u=d(),u=null!==u?u:"",null!==u)if(r=v(),r=null!==r?r:"",null!==r){for(e=[],t=w();null!==t;)e.push(t),t=w();null!==e?l=[l,n,u,r,e]:(l=null,q=o)}else l=null,q=o;else l=null,q=o;else l=null,q=o;else l=null,q=o;if(null!==l&&(l=function(l,n,u,r,e){var t={term:u};return""!=r&&(t.proximity=r),""!=e&&(t.boost=e),""!=n&&(t.prefix=n),t}(i,l[0],l[1],l[2],l[3])),null===l&&(q=i),null===l){if(i=q,o=q,l=O(),l=null!==l?l:"",null!==l)if(n=s(),null!==n)if(u=A(),u=null!==u?u:"",null!==u)if(r=v(),r=null!==r?r:"",null!==r){for(e=[],t=w();null!==t;)e.push(t),t=w();null!==e?l=[l,n,u,r,e]:(l=null,q=o)}else l=null,q=o;else l=null,q=o;else l=null,q=o;else l=null,q=o;null!==l&&(l=function(l,n,u,r,e){var t={term:u};return""!=r&&(t.similarity=r),""!=e&&(t.boost=e),""!=n&&(t.prefix=n),t}(i,l[0],l[1],l[2],l[3])),null===l&&(q=i)}return l}function s(){var l,n,u;if(u=q,n=h(),null!==n)for(l=[];null!==n;)l.push(n),n=h();else l=null;return null!==l&&(l=function(l,n){return n.join("")}(u,l)),null===l&&(q=u),l}function h(){var l;return 46===n.charCodeAt(q)?(l=".",q++):(l=null,0===j&&r('"."')),null===l&&(/^[^: \t\r\n\f{}()"+-\/^~[\]]/.test(n.charAt(q))?(l=n.charAt(q),q++):(l=null,0===j&&r('[^: \\t\\r\\n\\f{}()"+-\\/^~[\\]]'))),l}function p(){var l,u,e,t,i;if(t=q,i=q,34===n.charCodeAt(q)?(l='"',q++):(l=null,0===j&&r('"\\""')),null!==l){if(/^[^"]/.test(n.charAt(q))?(e=n.charAt(q),q++):(e=null,0===j&&r('[^"]')),null!==e)for(u=[];null!==e;)u.push(e),/^[^"]/.test(n.charAt(q))?(e=n.charAt(q),q++):(e=null,0===j&&r('[^"]'));else u=null;null!==u?(34===n.charCodeAt(q)?(e='"',q++):(e=null,0===j&&r('"\\""')),null!==e?l=[l,u,e]:(l=null,q=i)):(l=null,q=i)}else l=null,q=i;return null!==l&&(l=function(l,n){return n.join("")}(t,l[1])),null===l&&(q=t),l}function d(){var l,u,e,t;return e=q,t=q,126===n.charCodeAt(q)?(l="~",q++):(l=null,0===j&&r('"~"')),null!==l?(u=_(),null!==u?l=[l,u]:(l=null,q=t)):(l=null,q=t),null!==l&&(l=function(l,n){return n}(e,l[1])),null===l&&(q=e),l}function v(){var l,u,e,t;return e=q,t=q,94===n.charCodeAt(q)?(l="^",q++):(l=null,0===j&&r('"^"')),null!==l?(u=x(),null!==u?l=[l,u]:(l=null,q=t)):(l=null,q=t),null!==l&&(l=function(l,n){return n}(e,l[1])),null===l&&(q=e),l}function A(){var l,u,e,t;return e=q,t=q,126===n.charCodeAt(q)?(l="~",q++):(l=null,0===j&&r('"~"')),null!==l?(u=m(),u=null!==u?u:"",null!==u?l=[l,u]:(l=null,q=t)):(l=null,q=t),null!==l&&(l=function(l,n){return""==n?.5:n}(e,l[1])),null===l&&(q=e),l}function x(){var l;return l=m(),null===l&&(l=_()),l}function m(){var l,u,e,t,i;if(t=q,i=q,"0."===n.substr(q,2)?(l="0.",q+=2):(l=null,0===j&&r('"0."')),null!==l){if(/^[0-9]/.test(n.charAt(q))?(e=n.charAt(q),q++):(e=null,0===j&&r("[0-9]")),null!==e)for(u=[];null!==e;)u.push(e),/^[0-9]/.test(n.charAt(q))?(e=n.charAt(q),q++):(e=null,0===j&&r("[0-9]"));else u=null;null!==u?l=[l,u]:(l=null,q=i)}else l=null,q=i;return null!==l&&(l=function(l,n){return parseFloat("0."+n.join(""))}(t,l[1])),null===l&&(q=t),l}function _(){var l,u,e;if(e=q,/^[0-9]/.test(n.charAt(q))?(u=n.charAt(q),q++):(u=null,0===j&&r("[0-9]")),null!==u)for(l=[];null!==u;)l.push(u),/^[0-9]/.test(n.charAt(q))?(u=n.charAt(q),q++):(u=null,0===j&&r("[0-9]"));else l=null;return null!==l&&(l=function(l,n){return parseInt(n.join(""))}(e,l)),null===l&&(q=e),l}function g(){var l,u,e,t,i,o,f,c,a;if(c=q,a=q,91===n.charCodeAt(q)?(l="[",q++):(l=null,0===j&&r('"["')),null!==l)if(u=s(),null!==u){for(e=[],t=w();null!==t;)e.push(t),t=w();if(null!==e)if("TO"===n.substr(q,2)?(t="TO",q+=2):(t=null,0===j&&r('"TO"')),null!==t){if(o=w(),null!==o)for(i=[];null!==o;)i.push(o),o=w();else i=null;null!==i?(o=s(),null!==o?(93===n.charCodeAt(q)?(f="]",q++):(f=null,0===j&&r('"]"')),null!==f?l=[l,u,e,t,i,o,f]:(l=null,q=a)):(l=null,q=a)):(l=null,q=a)}else l=null,q=a;else l=null,q=a}else l=null,q=a;else l=null,q=a;if(null!==l&&(l=function(l,n,u){return{term_min:n,term_max:u,inclusive:!0}}(c,l[1],l[5])),null===l&&(q=c),null===l){if(c=q,a=q,123===n.charCodeAt(q)?(l="{",q++):(l=null,0===j&&r('"{"')),null!==l)if(u=s(),null!==u){for(e=[],t=w();null!==t;)e.push(t),t=w();if(null!==e)if("TO"===n.substr(q,2)?(t="TO",q+=2):(t=null,0===j&&r('"TO"')),null!==t){if(o=w(),null!==o)for(i=[];null!==o;)i.push(o),o=w();else i=null;null!==i?(o=s(),null!==o?(125===n.charCodeAt(q)?(f="}",q++):(f=null,0===j&&r('"}"')),null!==f?l=[l,u,e,t,i,o,f]:(l=null,q=a)):(l=null,q=a)):(l=null,q=a)}else l=null,q=a;else l=null,q=a}else l=null,q=a;else l=null,q=a;null!==l&&(l=function(l,n,u){return{term_min:n,term_max:u,inclusive:!1}}(c,l[1],l[5])),null===l&&(q=c)}return l}function y(){var l,n,u,r,e,t;for(e=q,t=q,l=[],n=w();null!==n;)l.push(n),n=w();if(null!==l)if(n=b(),null!==n){if(r=w(),null!==r)for(u=[];null!==r;)u.push(r),r=w();else u=null;null!==u?l=[l,n,u]:(l=null,q=t)}else l=null,q=t;else l=null,q=t;if(null!==l&&(l=function(l,n){return n}(e,l[1])),null===l&&(q=e),null===l){for(e=q,t=q,l=[],n=w();null!==n;)l.push(n),n=w();null!==l?(n=b(),null!==n?(u=E(),null!==u?l=[l,n,u]:(l=null,q=t)):(l=null,q=t)):(l=null,q=t),null!==l&&(l=function(l,n){return n}(e,l[1])),null===l&&(q=e)}return l}function b(){var l,u;return"OR"===n.substr(q,2)?(l="OR",q+=2):(l=null,0===j&&r('"OR"')),null===l&&("AND"===n.substr(q,3)?(l="AND",q+=3):(l=null,0===j&&r('"AND"')),null===l&&("NOT"===n.substr(q,3)?(l="NOT",q+=3):(l=null,0===j&&r('"NOT"')),null===l&&(u=q,"||"===n.substr(q,2)?(l="||",q+=2):(l=null,0===j&&r('"||"')),null!==l&&(l=function(l){return"OR"}(u)),null===l&&(q=u),null===l&&(u=q,"&&"===n.substr(q,2)?(l="&&",q+=2):(l=null,0===j&&r('"&&"')),null!==l&&(l=function(l){return"AND"}(u)),null===l&&(q=u))))),l}function O(){var l,n,u,r;for(u=q,r=q,l=[],n=w();null!==n;)l.push(n),n=w();return null!==l?(n=C(),null!==n?l=[l,n]:(l=null,q=r)):(l=null,q=r),null!==l&&(l=function(l,n){return n}(u,l[1])),null===l&&(q=u),l}function C(){var l;return 43===n.charCodeAt(q)?(l="+",q++):(l=null,0===j&&r('"+"')),null===l&&(45===n.charCodeAt(q)?(l="-",q++):(l=null,0===j&&r('"-"'))),l}function w(){var l,u;if(j++,/^[ \t\r\n\f]/.test(n.charAt(q))?(u=n.charAt(q),q++):(u=null,0===j&&r("[ \\t\\r\\n\\f]")),null!==u)for(l=[];null!==u;)l.push(u),/^[ \t\r\n\f]/.test(n.charAt(q))?(u=n.charAt(q),q++):(u=null,0===j&&r("[ \\t\\r\\n\\f]"));else l=null;return j--,0===j&&null===l&&r("whitespace"),l}function E(){var l,u;return u=q,j++,n.length>q?(l=n.charAt(q),q++):(l=null,0===j&&r("any character")),j--,null===l?l="":(l=null,q=u),l}function T(l){l.sort();for(var n=null,u=[],r=0;r<l.length;r++)l[r]!==n&&(u.push(l[r]),n=l[r]);return u}function N(){for(var l=1,u=1,r=!1,e=0;e<Math.max(q,D);e++){var t=n.charAt(e);"\n"===t?(r||l++,u=1,r=!1):"\r"===t||"\u2028"===t||"\u2029"===t?(l++,u=1,r=!0):(u++,r=!1)}return{line:l,column:u}}var F={start:e,node:t,group_exp:i,paren_exp:o,field_exp:f,fieldname:c,term:a,unquoted_term:s,term_char:h,quoted_term:p,proximity_modifier:d,boost_modifier:v,fuzzy_modifier:A,decimal_or_int_exp:x,decimal_exp:m,int_exp:_,range_operator_exp:g,operator_exp:y,operator:b,prefix_operator_exp:O,prefix_operator:C,_:w,EOF:E};if(void 0!==u){if(void 0===F[u])throw new Error("Invalid rule name: "+l(u)+".")}else u="start";var q=0,j=0,D=0,S=[],R=F[u]();if(null===R||q!==n.length){var M=Math.max(q,D),k=M<n.length?n.charAt(M):null,z=N();throw new this.SyntaxError(T(S),k,M,z.line,z.column)}return R},toSource:function(){return this._source}};return n.SyntaxError=function(n,u,r,e,t){function i(n,u){var r,e;switch(n.length){case 0:r="end of input";break;case 1:r=n[0];break;default:r=n.slice(0,n.length-1).join(", ")+" or "+n[n.length-1]}return e=u?l(u):"end of input","Expected "+r+" but "+e+" found."}this.name="SyntaxError",this.expected=n,this.found=u,this.message=i(n,u),this.offset=r,this.line=e,this.column=t},n.SyntaxError.prototype=Error.prototype,n}()},{}]},{},[1])(1)});